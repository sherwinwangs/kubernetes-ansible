- name: create secret for kubernetes access docker private registry
  shell: 'kubectl create secret docker-registry registrysecret \
         --docker-server="{{ groups.nexus[0] }}:{{ NEXUS_DOCKER_REGISTRY_PORT }}" \
         --docker-username=admin \
         --docker-password="{{ NEXUS_ADMIN_PASSWORD }}" \
         --docker-email=sherwinwangs@hotmail.com \
         -n kube-system'
  ignore_errors: true
  tags: docker_registry
